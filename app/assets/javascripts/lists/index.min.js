$(document).ready(function(){function t(e){var t=_.map(e,function(e){var t=new google.maps.LatLng(e.latitude,e.longitude);return t}).join("|");s(t)}function n(e){var t=_.map(e,function(e){var t=new google.maps.LatLng(e.latitude,e.longitude);return t}).join("|");o(t)}function r(e){var t=_.map(e,function(e){var t=new google.maps.LatLng(e.latitude,e.longitude);return t}).join("|");u(t)}function i(e){var t=_.map(e,function(e){var t=new google.maps.LatLng(e.latitude,e.longitude);return t}).join("|");a(t)}function s(e){var t=null,n=new google.maps.DistanceMatrixService;if(localStorage.getItem("latitude")!==null&&localStorage.getItem("longitude")!==null){var r=(new google.maps.LatLng(localStorage.getItem("latitude"),localStorage.getItem("longitude"))).toString(),i=new Array;i=e.split("|");s=i.slice(0,25);n.getDistanceMatrix({origins:[r],destinations:s,travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.IMPERIAL,avoidHighways:!1,avoidTolls:!1},function(e,t){t==google.maps.DistanceMatrixStatus.OK?f(e.rows[0].elements):$("#data-container").html('<div style="text-align: center;">There was an error processing locations.</div>')})}else if(localStorage.getItem("zip")!==null){var r=localStorage.getItem("zip"),s=new Array;s=e.split("|");s=s.slice(0,25);n.getDistanceMatrix({origins:[r],destinations:s,travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.IMPERIAL,avoidHighways:!1,avoidTolls:!1},function(e,t){t==google.maps.DistanceMatrixStatus.OK?f(e.rows[0].elements):$("#data-container").html('<div style="text-align: center;">There was an error processing locations.</div>')})}else c()}function o(e){var t=null,n=new google.maps.DistanceMatrixService;if(localStorage.getItem("latitude")!==null&&localStorage.getItem("longitude")!==null){var r=(new google.maps.LatLng(localStorage.getItem("latitude"),localStorage.getItem("longitude"))).toString(),i=new Array;i=e.split("|");i=i.slice(26,50);n.getDistanceMatrix({origins:[r],destinations:i,travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.IMPERIAL,avoidHighways:!1,avoidTolls:!1},function(e,t){t==google.maps.DistanceMatrixStatus.OK?f(e.rows[0].elements):$("#data-container").html('<div style="text-align: center;">There was an error processing locations.</div>')})}else if(localStorage.getItem("zip")!==null){var r=localStorage.getItem("zip"),i=new Array;i=e.split("|");i=i.slice(26,50);n.getDistanceMatrix({origins:[r],destinations:i,travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.IMPERIAL,avoidHighways:!1,avoidTolls:!1},function(e,t){t==google.maps.DistanceMatrixStatus.OK?f(e.rows[0].elements):$("#data-container").html('<div style="text-align: center;">There was an error processing locations.</div>')})}else c()}function u(e){var t=null,n=new google.maps.DistanceMatrixService;if(localStorage.getItem("latitude")!==null&&localStorage.getItem("longitude")!==null){var r=(new google.maps.LatLng(localStorage.getItem("latitude"),localStorage.getItem("longitude"))).toString(),i=new Array;i=e.split("|");i=i.slice(51,75);n.getDistanceMatrix({origins:[r],destinations:i,travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.IMPERIAL,avoidHighways:!1,avoidTolls:!1},function(e,t){t==google.maps.DistanceMatrixStatus.OK?f(e.rows[0].elements):$("#data-container").html('<div style="text-align: center;">There was an error processing locations.</div>')})}else if(localStorage.getItem("zip")!==null){var r=localStorage.getItem("zip"),i=new Array;i=e.split("|");i=i.slice(51,75);n.getDistanceMatrix({origins:[r],destinations:i,travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.IMPERIAL,avoidHighways:!1,avoidTolls:!1},function(e,t){t==google.maps.DistanceMatrixStatus.OK?f(e.rows[0].elements):$("#data-container").html('<div style="text-align: center;">There was an error processing locations.</div>')})}else c()}function a(e){var t=null,n=new google.maps.DistanceMatrixService;if(localStorage.getItem("latitude")!==null&&localStorage.getItem("longitude")!==null){var r=(new google.maps.LatLng(localStorage.getItem("latitude"),localStorage.getItem("longitude"))).toString(),i=new Array;i=e.split("|");i=i.slice(76,100);n.getDistanceMatrix({origins:[r],destinations:i,travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.IMPERIAL,avoidHighways:!1,avoidTolls:!1},function(e,t){t==google.maps.DistanceMatrixStatus.OK?f(e.rows[0].elements):$("#data-container").html('<div style="text-align: center;">There was an error processing locations.</div>')})}else if(localStorage.getItem("zip")!==null){var r=localStorage.getItem("zip"),i=new Array;i=e.split("|");i=i.slice(76,100);n.getDistanceMatrix({origins:[r],destinations:i,travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.IMPERIAL,avoidHighways:!1,avoidTolls:!1},function(e,t){t==google.maps.DistanceMatrixStatus.OK?f(e.rows[0].elements):$("#data-container").html('<div style="text-align: center;">There was an error processing locations.</div>')})}else c()}function f(e){_.each(e,function(e,t){l(parseInt(e.distance.value*62e-5,10),t)});c()}function l(t,n){var r=e[n].band,i=e[n].call_letters;if(r==="AM")if(t<=60){e[n].distance=t;e[n].show=!0}else{e[n].distance=t;e[n].show=!1}else if(r==="FM")if(t<=35){e[n].distance=t;e[n].show=!0}else{e[n].distance=t;e[n].show=!1}}function c(){var t=0;_.each(e,function(e){if(e.show){t++;var n='<div class="post clearfix"><div class="post-image">';n+=e.frequency+'</div><div class="post-station"><h1 class="post-title">';n+=e.call_letters+" - "+e.name+'</h1><p class="post-meta">';n+=e.band+" - "+e.city+", "+e.state+"</p><p>";n+="Phone: "+e.phone+"<br/>Genres: "+e.genre+'</p></div><div class="post-social"><p class="post-meta">Share It:</p><a href="http://twitter.com/home?status='+document.URL+'" title="Click to share this on Twitter" target="_blank"><span class="social-link-item twitter" style="margin-right:5px"></span></a><a href="https://www.facebook.com/sharer/sharer.php?u='+document.URL+'" target="_blank" title="Click to share this on Facebook"><span class="social-link-item facebook"></span></a></div></div>';$("#data-container").append(n)}});window.getComputedStyle($("#data-container"))}if($("#data-container").length>0){var e=undefined;$.ajaxSetup({cache:!1});$.getJSON(window.location.pathname,function(s){if(s.length===0)$("#data-container").html('<div style="text-align: center;">No results found within your radius</div>');else{e=s;if(e.length>=75){t(e);n(e);r(e);i(e)}else if(e.length>=50){t(e);n(e);r(e)}else if(e.length>=25){t(e);n(e)}else t(e)}})}});